==== s3_image_tgz_to_volume

Used as part of the process to import an AMI from a tarball.  Launches an instance, pulls an image tarball from S3, extracts the tarball, applies it to a volume, and snapshots the volume

[cols="1,1,1,2", options="header"]
.Variables
|===
|Name
|type
|Default
|Description

|region
|string
|n/a
|region targeted for subsequent actions (instance/volume/snapshot creation)

|subnet_id
|string
|n/a
|ID of working subnet (to create vm_importer instance needed to support import process)"

|ami_id
|string
|n/a
|ID of AMI to use for importer VM

|bucket_name
|string
|n/a
|bucket to copy image tgz from

|s3_object_key
|string
|n/a
|s3 object key of image tgz

|security_group_ids
|list
|n/a
|security_groups_ids to apply to importer vm

|enable_public_ip
|boolean (string)
|true
|required if running from outside VPC

|iam_instance_profile
|string
|director
|Name of instance profile to assign to temporary instance used.  Needs access to pull tarball from S3 bucket specified

|instance_type
|string
|m4.xlarge
|Instance type used for temporary importer VM.  The better suited for writing to disk and creating a snapshot, the better performance/less time it will take to create

|is_linux
|boolean (string)
|true
|indicate whether to run shell script (requires linux)

|===


[cols="1,1,2", options="header"]
.Outputs
|===
|Name
|type
|Description

|priv_key
|string
|temporary private key created to access importer instance

|extracted_image_name
|string
|name of the image file extracted from tarball

|volume_id
|string
|ID of EBS Volume which image has been applied to

|vm_importer_host
|string
|Public DNS (if set) of the importer instance

|public_ip
|string
|Public IP (if set) of the importer instance

|private_ip
|string
|Private IP of the importer instance

|===